<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	<bean id="appBeanPostProcessor" class="org.appcelerator.spring.AppBeanPostProcessor" lazy-init="default" autowire="default" dependency-check="default"/>
	<bean id="sessionExecutorFactory" class="org.appcelerator.session.SingleThreadedSessionExecutorFactory" lazy-init="default" autowire="default" dependency-check="default"/>
	<bean id="executableSessionFactory" class="org.appcelerator.session.ExecutableSessionFactory" lazy-init="default" autowire="default" dependency-check="default"/>
	<bean id="executableSessionManager" class="org.appcelerator.session.ExecutableSessionManager" lazy-init="default" autowire="default" dependency-check="default"/>
	<bean id="serviceBroker" class="org.appcelerator.messaging.InMemoryServiceBroker" lazy-init="default" autowire="default" dependency-check="default"/>

	<bean id="serviceServlet" class="org.appcelerator.servlet.service.ServiceDispatcherServlet" lazy-init="default" autowire="default" dependency-check="default">
        <property name="urlPattern" value="/servicebroker"/>
        <property name="executableSessionFactory" ref="executableSessionFactory"/>
        <property name="sessionExecutorFactory" ref="sessionExecutorFactory"/>
        <property name="sharedSecret" value="#{shared.secret}"/>
    </bean>

	<bean id="uploadServlet" class="org.appcelerator.servlet.upload.UploadServlet" lazy-init="default" autowire="default" dependency-check="default">
        <property name="urlPattern" value="/upload"/>
        <property name="authenticationRequired" value="false"/>
    </bean>

	<bean id="downloadServlet" class="org.appcelerator.servlet.download.DownloadServlet" lazy-init="default" autowire="default" dependency-check="default">
        <property name="urlPattern" value="/download"/>
    </bean>

	<bean id="proxyServlet" class="org.appcelerator.servlet.proxy.ProxyServlet" lazy-init="default" autowire="default" dependency-check="default">
        <property name="urlPattern" value="/proxy"/>
    </bean>
	
	<bean id="routerService" class="org.appcelerator.router.ServiceRouter" lazy-init="default" autowire="default" dependency-check="default">
        <property name="sharedSecret" value="#{shared.secret}"/>
    </bean>

	<bean id="registererService" class="org.appcelerator.router.ServiceRegisterer" lazy-init="default" autowire="default" dependency-check="default">
        <property name="sharedSecret" value="#{shared.secret}"/>
    	<property name="routers">
    		<list>
    		</list>
    	</property>
    	<property name="location" value="http://#{ipaddress}:8080/#{webapp.name}/-/servicebroker"/>
    </bean>
	
	<bean id="serverStatsService" class="org.appcelerator.server.ServerStatsService" lazy-init="default" autowire="default" dependency-check="default"/>
	<bean id="updateService" class="org.appcelerator.update.UpdateService" lazy-init="default" autowire="default" dependency-check="default"/>
	
	<!--- Add Appcelerator Services Here -->
	
	<bean id="sampleService" class="SampleService" lazy-init="default" autowire="default" dependency-check="default"/>
	
</beans>
