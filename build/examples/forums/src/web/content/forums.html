<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>
</head>
<body>
	<div class="forums_container" on="main[forums] then show else hide" style="display:none;">
		<h1 style="margin-top:0;">Forums</h1>
		<p class="subtitle">
		<span on="l:forums.response then value[threads]"></span> threads(s), 
		<span on="l:forums.response then value[posts]"></span> post(s), <span on="l:forums.response then value[users]"></span> voice(s)
		</p>
		
		<div class="forums_header">
			<div class="forums_header_forums"><span>Forums</span></div>
			<div class="forums_header_lastpost"><span>Last Post</span></div>
		</div>
		<div class="forums_content" on="l:forums.response then effect[appear] or l:forums.request then hide" style="display:none;">
			<app:iterator on="l:forums.response then execute" property="rows">
				<html:table border="0" width="100%" cellspacing="0" cellpadding="0">
					<html:tr class="forum_content_row">	
						<html:td class="forum_icon"></html:td>
						<html:td class="forum_title">
							<html:a on="click then l:threads.request[forumid=#{id},type=byforum,forumname='#{name}']" class="title">#{name}</html:a>
							<html:div class="stats">#{threads} threads, #{posts} posts</html:div>
							<html:div class="description">#{description}</html:div>
						</html:td>
						<html:td class="forums_postdate">
							#{lastpost.date} by #{lastpost.user.username}
						</html:td>
					</html:tr>
				</html:table>
			</app:iterator>
		</div>
		<!-- create a new forum -->
		<div class="forums_container">
			<table style="background-color:#f6f6f6;padding:10px;border:1px dashed #bbb">
				<tr>
					<td class="bold_value_grey">name:</td>
					<td><input type="text" fieldset="forum" id="newforum_name" validator="required" decorator="required"/></td>
				</tr>
				<tr>
					<td class="bold_value_grey">description:</td>
					<td><input type="text" fieldset="forum" id="newforum_description" validator="required" decorator="required"/></td>
				</tr>
				<tr>
					<td colspan="2" align="left" >
						<input type="button" value="create new forum" fieldset="forum" style="margin-top:10px" on="click then l:createforum.request"
							activators="newforum_name,newforum_description"/>
					</td>
				</tr>
			</table>
		</div>
 		<app:message on="l:createforum.response then execute" name="l:forums.request"></app:message>
	</div>
</body>