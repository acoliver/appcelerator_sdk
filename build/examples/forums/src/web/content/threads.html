<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>
</head>
<body>
	<div id="threads_container" on="main[threads] then effect[appear] else hide" style="display:none;">
		<div id="forums_header">
			<div id="forums_header_forums"><span>Threads</span></div>
			<div id="forums_header_lastpost"><span>Last Post</span></div>
		</div>
		<div id="threads_content" on="l:threads.getdata.response then effect[appear] after 2s or l:threads.getdata.request then hide or l:search.request then hide" style="display:none;">
			<app:iterator on="l:threads.getdata.response then execute" property="rows">
				<html:table border="0" width="100%" cellspacing="0" cellpadding="0">
					<html:tr class="forum_content_row">	
						<html:td class="forum_icon"></html:td>
						<html:td class="forum_title">
							<html:a on="click then l:thread.request[threadid=#{id}]" class="title">#{name}</html:a>
							<html:div class="stats">#{count} messages in thread</html:div>
							<html:div class="description">#{description}</html:div>
						</html:td>
						<html:td class="forums_postdate">
							#{lastModifiedDate} by #{lastUsername}
						</html:td>
					</html:tr>
				</html:table>
			</app:iterator>
		</div>
	</div>
	<app:script on="l:threads.request then execute">
		$MQ('l:threads.getdata.request',{'forumid':this.data.forumid});
	</app:message>
</body>