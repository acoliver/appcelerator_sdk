<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>
<script type="text/javascript" src="js/mock.js"></script>

</head>

<body>
    <div style="display: none">
        
        <app:script>
              window.mock = new Mock();
        </app:script>
        
        <!-- Pages mocks -->
        <app:script on="r:pages.request then execute">
            var pages = [{'id':'one', 'title':'Welcome to appforums', 'status': 'Published'}, 
                    {'id':'two', 'title':'Build apps faster', 'status':'Published'}, 
                    {'id':'three', 'title':'More app, less code', 'status':'Published'}];
            $MQ("r:pages.response", {'pages': pages});
        </app:script>
        <app:script on="r:add.child.request then execute">
            $MQ('r:add.child.response', {});
        </app:script>
        <app:script on="r:remove.page.request then execute">
            $MQ('r:remove.page.response', {'id': this.data.id});
        </app:script>
        <app:script on="r:edit.page.request[id=one] then execute">
            $MQ('r:edit.page.response', {'title': 'Welcome to appforums', 
                'status': 'published', 'text': mock.postOne()});
        </app:script>
        <app:script on="r:edit.page.request[id=two] then execute">
            $MQ('r:edit.page.response', {'title': 'Build apps faster', 
                'status': 'published', 'text': mock.postTwo()});
        </app:script>
        <app:script on="r:edit.page.request[id=three] then execute">
            $MQ('r:edit.page.response', {'title': 'More app, less code', 
                'status': 'published', 'text': mock.postThree()});
        </app:script>
        <!-- Snippets mocks -->
        <app:script on="r:snippets.request then execute">
            var snippets = [{'id':'logo', 'title':'Logo'}, 
                    {'id':'footer', 'title':'Footer'}, 
                    {'id':'archive', 'title':'Archive Links'},
                    {'id':'links', 'title':'Competitors'},
                    {'id':'picture', 'title':'Picture'},
                    {'id':'blog_roll', 'title':'Blog Roll'}
                    ];
            $MQ("r:snippets.response", {'snippets': snippets});
        </app:script>
        <app:script on="r:remove.snippet.request then execute">
            $MQ('r:remove.snippet.response', {'id': this.data.id});
        </app:script>
        <app:script on="r:edit.snippet.request[id=logo] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': mock.generateHeader()});
        </app:script>
        <app:script on="r:edit.snippet.request[id=footer] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': mock.generateFooter()});
        </app:script>
        <app:script on="r:edit.snippet.request[id=archive] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': mock.archiveSection()});
        </app:script>
        <app:script on="r:edit.snippet.request[id=links] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': mock.linksSection()});
        </app:script>
        <app:script on="r:edit.snippet.request[id=picture] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': mock.pictureSection()});
        </app:script>
        <app:script on="r:edit.snippet.request[id=blog_roll] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': mock.blogRollSection()});
        </app:script>
        
        <!-- Layout Mocks -->
        <app:script on="r:layouts.request then execute">
            var layouts = [{'id':'main', 'title':'Main Layout'}];
            $MQ("r:layouts.response", {'layouts': layouts});
        </app:script>
        <app:script on="r:remove.layout.request then execute">
            $MQ('r:remove.layout.response', {'id': this.data.id});
        </app:script>
        <app:script on="r:edit.layout.request[id=main] then execute">
            $MQ('r:edit.layout.response', {'id': this.data.id, 'layout_title': 'Main Layout', 
                'text': 'Random header text'});
        </app:script>
        <app:script on="r:load.layout.dialog.request then execute">
            var snippets = [{'snippet_id':'logo', 'title':'Logo'}, 
                {'snippet_id':'footer', 'title':'Footer'}, 
                {'snippet_id':'archive', 'title':'Archive Links'},
                {'snippet_id':'links', 'title':'Competitors'},
                {'snippet_id':'content', 'title':'Content'}];
            
            var header_snippets = [{'snippet_id':'logo', 'title':'Logo'}];    
            var sidebar_snippets = [{'snippet_id':'archive', 'title':'Archive Links'},
                    {'snippet_id':'links', 'title':'Competitors'}];
            var footer_snippets = [{'snippet_id':'footer', 'title':'Footer'}];
            var content_snippets = [{'snippet_id':'content', 'title':'Content'}];                        
            $MQ('r:load.layout.dialog.response', {'snippets': snippets, 'header_snippets': header_snippets,
                    'sidebar_snippets': sidebar_snippets, 'footer_snippets': footer_snippets,
                    'content_snippets': content_snippets});
        </app:script>
        
        <!-- Site mocks -->
        <app:script on="r:load.header.request then execute">
            $MQ('r:load.header.response', {'value': mock.generateHeader() });
        </app:script>
        <app:script on="r:load.footer.request then execute">
            $MQ('r:load.footer.response', {'value': mock.generateFooter() });
        </app:script>
        <app:script on="r:load.sidebar.request then execute">
            $MQ('r:load.sidebar.response', {'value': mock.generateSidebar() });
        </app:script>
        <app:script on="r:load.content.request then execute">
            if(this.data.type == 'archive') 
            {
                $MQ('r:load.content.response', {'value': mock.generateContentLastMonth() });                
            }
            else
            {
                $MQ('r:load.content.response', {'value': mock.generateContent() });
            }
        </app:script>
    </div>
</body>