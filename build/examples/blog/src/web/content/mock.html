<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>
<script type="text/javascript" src="js/mock.js"></script>

</head>

<body>
    <div style="display: none">
        
        <app:script>
              window.mock = new Mock();
          </app:script>
        <!-- Pages mocks -->
        <app:script on="r:pages.request then execute">
            var pages = [{'id':'one', 'title':'Welcome to appforums', 'status': 'Published'}, 
                    {'id':'two', 'title':'Build apps faster', 'status':'Published'}, 
                    {'id':'three', 'title':'More app, less code', 'status':'Published'}];
            $MQ("r:pages.response", {'pages': pages});
        </app:script>
        <app:script on="r:add.child.request then execute">
            $MQ('r:add.child.response', {});
        </app:script>
        <app:script on="r:remove.page.request then execute">
            $MQ('r:remove.page.response', {'id': this.data.id});
        </app:script>
        <app:script on="r:edit.page.request then execute">
            $MQ('r:edit.page.response', {'title': this.data.title, 
                'status': this.data.status, 'text': "I'm just playing around with this blog system"});
        </app:script>
        
        <!-- Snippets mocks -->
        <app:script on="r:snippets.request then execute">
            var snippets = [{'id':'header', 'title':'header'}, 
                    {'id':'footer', 'title':'Footer'}, 
                    {'id':'sidebar', 'title':'Sidebar'}];
            $MQ("r:snippets.response", {'snippets': snippets});
        </app:script>
        <app:script on="r:remove.snippet.request then execute">
            $MQ('r:remove.snippet.response', {'id': this.data.id});
        </app:script>
        <app:script on="r:edit.snippet.request[id=header] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': Mock.generateHeader()});
        </app:script>
        <app:script on="r:edit.snippet.request[id=footer] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': Mock.generateFooter()});
        </app:script>
        <app:script on="r:edit.snippet.request[id=sidebar] then execute">
            $MQ('r:edit.snippet.response', {'id': this.data.id, 'title': this.data.title, 
                'text': Mock.generateSidebar()});
        </app:script>
        
        <!-- Layout Mocks -->
        <app:script on="r:layouts.request then execute">
            var layouts = [{'id':'main', 'title':'Main Layout'}];
            $MQ("r:layouts.response", {'layouts': layouts});
        </app:script>
        <app:script on="r:remove.layout.request then execute">
            $MQ('r:remove.layout.response', {'id': this.data.id});
        </app:script>
        <app:script on="r:edit.layout.request[id=main] then execute">
            $MQ('r:edit.layout.response', {'id': this.data.id, 'layout_title': 'Main Layout', 
                'text': 'Random header text'});
        </app:script>
        <app:script on="r:load.snippets.request then execute">
            var snippets = [{'snippet_id':'header', 'title':'header'}, 
                    {'snippet_id':'footer', 'title':'Footer'}, 
                    {'snippet_id':'sidebar', 'title':'Sidebar'}];
            $MQ('r:load.snippets.response', {'snippets': snippets});
        </app:script>
        
        <!-- Site mocks -->
        <app:script on="r:load.header.request then execute">
            $MQ('r:load.header.response', {'value': mock.generateHeader() });
        </app:script>
        <app:script on="r:load.footer.request then execute">
            $MQ('r:load.footer.response', {'value': mock.generateFooter() });
        </app:script>
        <app:script on="r:load.sidebar.request then execute">
            $MQ('r:load.sidebar.response', {'value': mock.generateSidebar() });
        </app:script>
        <app:script on="r:load.content.request then execute">
            $MQ('r:load.content.response', {'value': mock.generateContent() });
        </app:script>
    </div>
</body>