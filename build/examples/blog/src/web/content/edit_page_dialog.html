<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="js/appcelerator.js"></script>
	<title>Edit Dialog</title>
</head>
<body>

<app:modaldialog on="r:edit.page.response then execute and l:set.status[value=status]">  
    <html:div width="80%" class="modal_dialog">
        <html:div class="dialog_header">
            Edit #{title} <span style='display: none' on="r:save.page.response[result=success] then show and effect[Fade]">(Saved)</span>
        </html:div>
        <html:div class="dialog_body">
            <html:input fieldset="edit_page" type="hidden" name="page_id" value="#{id}"></html:input>
            <html:table width="100%" height="30px">
            <html:tr>
                <html:th>
                    Title:
                </html:th>
                <html:td class="clickable">
                    <app:editinplace type='text' id="page_title" saveOn="click then l:save" 
                        cancelOn="click then l:cancel" validator="required" position="right"
                        defaultClassName="name" defaultValue="#{title}">
                    </app:editinplace> 
                </html:td>
                <html:th>
                    Status:
                </html:th>
                <html:td>
                    <app:field validator="required" type="dropdown" langid="status_codes" 
                        on="l:set.status then value[value]" fieldset="edit_page" >
                    </app:field>
                </html:td>
            </html:tr>    
            </html:table>
            <html:h3 class="text_area">Page</html:h3>
            <html:div class="text_area">
                <textarea fieldset="edit_page">#{text}</textarea>            
            </html:div>
            <html:input type="button" on="click then l:appcelerator.modaldialog.hide" value="close"></html:input> 
            <html:input fieldset="edit_page" type="button" on="click then r:save.page.request" value="save"></html:input> 
            <html:input fieldset="edit_page" type="button" on="click then r:save.page.request[close=true]" value="Save and Close"></html:input>
        </html:div>
    </html:div>

    <app:message on="r:save.page.response[result=success,close=true] then execute" name="l:appcelerator.modaldialog.hide"></app:message>
</app:modaldialog>
</body>
</html>
