<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Edit Dialog</title>  
</head>
<body>
    <app:script on="l:drop.item then execute">
        /*printMe(this);*/
        printMe(this.data.element);
        alert(this.data.element);
    </app:script>
    <app:modaldialog on="r:edit.layout.response then execute and script[$MQ('r:load.snippets.request')]"> 
        <app:message name="r:load.snippets.request"></app:message> 
        <html:div width="80%" class="modal_dialog">
            <html:div class="dialog_header">
                Edit #{layout_title} <span style='display: none' on="l:layout.save then show and effect[Fade]">(Saved)</span>
            </html:div>
            <html:div class="dialog_body">
                <html:table width="100%" height="30px">
                <html:tr>
                    <html:th>
                        Title:
                    </html:th>
                    <html:td class="clickable">
                        <app:editinplace type='text' id="layout_title" saveOn="click then l:save" 
                            cancelOn="click then l:cancel" validator="required" position="right"
                            defaultClassName="name" defaultValue="#{layout_title}">
                        </app:editinplace> 
                    </html:td>
                </html:tr>    
                </html:table>
                <html:h3 class="text_area">Layout</html:h3>
                <html:div class="text_area">
                    <html:div class="left_column">
                        <html:div class="layout_body">
                            <html:div class="layout_header" id="header_drop_area" droppable='true' on="drop then l:drop.item[element=element]"><html:h5>header</html:h5></html:div>                        
                            <html:div class="layout_content" id="content_drop_area" droppable='true'><html:h5>content</html:h5></html:div>                        
                            <html:div class="layout_footer" id="footer_drop_area" droppable='true'><html:h5>footer</html:h5></html:div>                        
                            <html:div class="layout_sidebar" id="sidebar_drop_area" droppable='true'><html:h5>sidebar</html:h5></html:div>                        
                        </html:div>
                    </html:div>            
                    <html:div class="right_column">
                        <html:h4 class="snippet_list_header">Layout Elements</html:h4>
                        <html:div class="snippet_list">
                            <app:iterator on="r:load.snippets.response then execute" property="snippets">
                                 <html:div class="name clickable" snippet_id="#{snippet_id}" draggable='true'>#{title}</html:div>
                            </app:iterator>
                        </html:div>
                    </html:div>
                    <html:div style="clear: both"></html:div>
                </html:div>
                <html:button on="click then l:appcelerator.modaldialog.hide">Close</html:button> 
                <html:button on="click then l:snippet.save">Save</html:button> 
                <html:button>Save and Close</html:button>
            </html:div>
        </html:div>
    </app:modaldialog>
</body>
</html>
