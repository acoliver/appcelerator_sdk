Appcelerator.Module.Upload={getName:function(){return"appcelerator upload"},getDescription:function(){return"upload widget"},getVersion:function(){return 1},getSpecVersion:function(){return 1},getAuthor:function(){return"Jeff Haynie"},getModuleURL:function(){return"http://www.appcelerator.org"},isWidget:function(){return true},getWidgetName:function(){return"app:upload"},execute:function(D,A,C,B){Appcelerator.Module.Template.fetch(D,A["src"],A["args"])},compileWidget:function(F){var H=F["id"];var E=Form.Methods.getElements(H+"_form");if(E&&E.length>0){for(var G=0,A=E.length;G<A;G++){var D=E[G];var C=D.getAttribute("name");if(!C){D.setAttribute("name",D.id)}}}var B=Appcelerator.ServerConfig["upload"];$(H+"_form").action=B.value},getAttributes:function(){return[{name:"on",optional:true},{name:"maxsize",optional:true},{name:"service",optional:true}]},buildWidget:function(D,J,A){var C=Appcelerator.Compiler.getHtml(D,true);var I=D.id+"_target";var H=J["service"];var G=J["on"];var B=G?('on="'+G+'"'):"";var F=J["maxsize"];if(H&&H.indexOf(":")>0){H=H.split(":")[1]}var E='<form method="POST" id="'+D.id+'_form" enctype="multipart/form-data" target="'+I+'" '+B+">";if(F){E+='<input type="hidden" name="MAX_FILE_SIZE" value="'+F+'"/>'}E+="<input type='hidden' name='instanceid' value='"+Appcelerator.instanceid+"'/>";E+="<input type='hidden' name='type' value='"+H+"'/>";E+="<input type='hidden' name='callback' value='r:appcelerator.ping'/>";E+=C;E+="</form>";new Insertion.Bottom(document.body,'<iframe name="'+I+'" id="'+I+'" width="1" height="1" src="about:blank" style="position:absolute;top:-400px;left:-400px;width:1px;height:1px;"></iframe>');J["id"]=id;return{"position":Appcelerator.Compiler.POSITION_REPLACE,"presentation":E,"compile":true,"wire":true}}};Appcelerator.Core.registerModule("app:upload",Appcelerator.Module.Upload)