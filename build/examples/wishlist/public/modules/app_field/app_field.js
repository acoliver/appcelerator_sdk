Appcelerator.Decorator["field_decorator"]=function(B,C,A){var D=$(A);D.style.visibility=(C)?"hidden":"visible"};Appcelerator.Module.Field={getName:function(){return"appcelerator field"},getDescription:function(){return"field widget"},setPath:function(A){this.modulePath=A},getVersion:function(){return 1},getSpecVersion:function(){return 1},getAuthor:function(){return"Jeff Haynie"},getModuleURL:function(){return"http://www.appcelerator.org"},isWidget:function(){return true},getWidgetName:function(){return"app:field"},compileWidget:function(B){var Z=B["id"];var k=B["type"];var a=B["fieldClass"];var A=B["fieldDefaultValueClass"];var g=B["fieldFocusClass"];var h=B["focusClass"];var O=B["blurClass"];var E=B["fieldBlurClass"];var Q=B["defaultFieldValue"];var j=B["validator"];var P=Z+"_error";var X=B["delay"];var D=B["autocomplete"];var i=B["indicator"];var J=B["message"];var d=B["property"];var b=B["value"];var S=B["text"];var R=B["scope"];var f=B["parameters"];var G=$(Z);var Y=$(Z+"_field_container");if(A){Element.addClassName(Z,A)}if(a){Element.addClassName(Z,a)}var F=function(){switch(k){case"text":case"password":case"autocomplete":return G.value;case"select":case"dropdown":if(G.options.length==0||G.options.selectedIndex<0){return""}return G.options[G.options.selectedIndex].text}};var C=function(l){switch(k){case"text":case"password":case"autocomplete":G.value=l;break}};var I=function(){if(A){Element.removeClassName(G,A)}Element.addClassName(G,g);Element.addClassName(Y,h);Element.removeClassName(G,E);Element.removeClassName(G,O);if(Q){if(Q==F()){C("");if(G.revalidate){G.revalidate()}}}return true};var K=function(){if(j){Appcelerator.Decorator["field_decorator"](G,"",P)}};var H=function(){Element.addClassName(G,E);Element.addClassName(Y,O);Element.removeClassName(G,g);Element.removeClassName(Y,h);var l=F();if(Q){if(l==""){Element.addClassName(G,A);C(Q);setTimeout(K,100)}}else{Element.removeClassName(G,A)}G.value=l;return true};Appcelerator.Compiler.attachFunction(G,"focus",function(){G.focus()});Appcelerator.Compiler.attachFunction(G,"select",function(){G.select()});Appcelerator.Compiler.attachFunction(G,"reset",function(){switch(k){case"text":case"password":case"autocomplete":G.value="";break;case"select":case"dropdown":G.options.length=0;break}});if(k=="autocomplete"){var U=null;var X=Appcelerator.Util.DateTime.timeFormat(X||"400ms");if(!D){throw"autocomplete field types must have a 'autocomplete' attribute for the message to send"}var V=null;if(i){if(i=="footer"){V=$(Z+"_footer");V.style.visibility="hidden"}else{V=$(i)}if(!V){throw"autocomplete field couldn't find indicator with ID: "+i}}var U=null;var V=$(i);var M=function(){if(U){clearTimeout(U);U=null}return true};var N=G.value;var T=function(){M();currentvalue=G.value;if(V){Element.setStyle(V,{visibility:"visible"})}var l={};if(f){l=Object.evalWithinScope(f,window)}l["id"]=Z;l["value"]=G.value;$MQ(Appcelerator.Compiler.convertMessageType(D),l,R);return true};var W=function(l){M();if(V){Element.setStyle(V,{visibility:"hidden"})}U=setTimeout(T,X);return true};Event.observe(G,"keyup",W,false);Event.observe(G,"blur",M,false)}Event.observe(G,"focus",I,false);Event.observe(G,"blur",H,false);if(J){J=Appcelerator.Compiler.convertMessageType(J);if(!d){throw"field with message must also define PROPERTY attribute"}var L=null;var c=null;if(k=="select"||k=="dropdown"){c=b;if(!c){throw"select field with message must also define a VALUE attribute"}L=S;if(!L){L=c}}var e={accept:function(){return[J]},acceptScope:function(l){return R=="*"||l==R},onMessage:function(w,m,n,u){try{$D("received message = "+u+":"+w+",data="+Object.toJSON(m));var v=d?Object.getNestedProperty(m,d):m;switch(k){case"text":case"password":case"autocomplete":G.value=v;break;case"select":case"dropdown":if(typeof v=="array"||(typeof v=="object"&&v.length)){G.options.length=0;for(var s=0,q=v.length;s<q;s++){var p=v[s];var o=Object.getNestedProperty(p,L);var l=Object.getNestedProperty(p,c);G.options[G.options.length]=new Option(o,l)}}else{G.options.length=0;G.options[0]=new Option(v,v)}}if(G.revalidate){G.revalidate()}}catch(r){Appcelerator.Compiler.handleElementException(G,r)}}};Appcelerator.Util.ServiceBroker.addListener(e)}K()},getAttributes:function(){return[{name:"type",optional:true,defaultValue:"text"},{name:"validator",optional:true},{name:"fieldset",optional:true},{name:"fieldClassName",optional:true,defaultValue:"field"},{name:"activeClassName",optional:true,defaultValue:"selected"},{name:"inactiveClassName",optional:true,defaultValue:""},{name:"fieldActiveClassName",optional:true,defaultValue:""},{name:"fieldInactiveClassName",optional:true,defaultValue:""},{name:"fieldDefaultClassName",optional:true,defaultValue:""},{name:"fieldDefaultLangId",optional:true},{name:"parameters",optional:true},{name:"inline",optional:true},{name:"fieldDefaultClassName",optional:true,defaultValue:""},{name:"name",optional:true},{name:"hash",optional:true},{name:"langid",optional:true},{name:"delay",optional:true},{name:"autocomplete",optional:true},{name:"indicator",optional:true},{name:"message",optional:true},{name:"property",optional:true},{name:"value",optional:true},{name:"text",optional:true}]},buildWidget:function(J,g){var m=g["type"];var k=g["validator"];var M=g["fieldset"];var d=J.id;var a="";var K="";var T=Appcelerator.Module.Field.modulePath+"images/bullet_error.png";var V="<img src='"+T+"'/> Required";var W="";var b="medium_text info_color";var Y="error_color small_text";var D="small_text info_color";var e=g["fieldClassName"];var i=g["activeClassName"];var Q=g["inactiveClassName"];var h=g["fieldActiveClassName"];var C=g["fieldInactiveClassName"];var A=g["fieldDefaultClassName"];var f=g["fieldDefaultLangId"];var U="";var G=null,S=null;var L=g["inline"];g["parameters"]=String.unescapeXML(g["parameters"]);g["scope"]=J.scope;g["id"]=d;if(f){U=Appcelerator.Localization.get(f,"")}if(Appcelerator.Browser.isIE){var P=J.innerHTML;P=P.replace(/<HEADER/g,"<APP:HEADER").replace(/\/HEADER>/g,"/APP:HEADER>");P=P.replace(/<FOOTER/g,"<APP:FOOTER").replace(/\/FOOTER>/g,"/APP:FOOTER>");P=P.replace(/<ERROR/g,"<APP:ERROR").replace(/\/ERROR>/g,"/APP:ERROR>");J.innerHTML=P}for(var l=0,O=J.childNodes.length;l<O;l++){var Z=J.childNodes[l];if(Z.nodeType==1){var E=Z.getAttribute("langid");switch(Z.nodeName){case"HEADER":b=((Appcelerator.Browser.isIE)?Z.className:Z.getAttribute("class"))||b;S=Z.getAttribute("on");a=(E)?("<span>"+Appcelerator.Localization.get(E,"")+"</span>"):Appcelerator.Compiler.getHtml(Z);break;case"FOOTER":D=((Appcelerator.Browser.isIE)?Z.className:Z.getAttribute("class"))||D;G=Z.getAttribute("on");K=(E)?("<span>"+Appcelerator.Localization.get(E,"")+"</span>"):Appcelerator.Compiler.getHtml(Z);break;case"ERROR":Y=((Appcelerator.Browser.isIE)?Z.className:Z.getAttribute("class"))||Y;V=(E)?Appcelerator.Localization.get(E,V):Appcelerator.Compiler.getHtml(Z);break}}}var R=d+"_error";var j=k?'validator="'+k+'"':"";var F=S?' on="'+S+'" ':"";var H=G?' on="'+G+'" ':"";if(!L){W+='<div id="'+d+'_header" '+F+' class="'+b+'">'+a+' <span class="'+Y+'" id="'+R+'" style="visibility:hidden">'+V+"</span></div>"}var I=g["name"];var X=I?'name="'+I+'"':"";switch(m){case"text":case"password":if(!L){W+="<div>"}var B=(m=="password")?g["hash"]:null;var N=B?'hash="'+B+'"':"";W+="<input "+j+" "+X+" "+N+' decorator="custom" decoratorId="'+R+'" type="'+m+'" value="'+U+'" id="'+d+'" '+(M?'fieldset="'+M+'"':"")+"/>";break;case"textarea":if(!L){W+="<div>"}W+="<textarea "+j+" "+X+" "+N+' decorator="custom" decoratorId="'+R+'" id="'+d+'" '+(M?'fieldset="'+M+'"':"")+">"+U+"</textarea>";break;case"select":case"dropdown":if(!L){W+="<div>"}W+="<select "+j+" "+X+' decorator="custom" decoratorId="'+R+'" id="'+d+'" '+(M?'fieldset="'+M+'"':"");var E=g["langid"];if(E){W+=' langid="'+E+'" '}W+=">";W+="</select>";break;case"autocomplete":if(!L){W+="<div>"}W+='<input type="text" '+j+""+X+' decorator="custom" decoratorId="'+R+'" value="'+U+'" id="'+d+'" '+(M?'fieldset="'+M+'"':"")+"/>";break;default:throw"unsupported field type: '"+m+"'"}if(!L){W+="</div>";W+='<div id="'+d+'_footer" '+H+' class="'+D+'">'+K+"</div>"}else{W+=' <span class="'+Y+'" id="'+R+'" style="visibility:hidden">'+V+"</span>"}J.id=J.id+"_field";return{"presentation":'<div class="field" id="'+J.id+'_container">'+W+"</div>","position":Appcelerator.Compiler.POSITION_REPLACE,"compile":true,"wire":true}}};Appcelerator.Core.registerModule("app:field",Appcelerator.Module.Field);Appcelerator.Core.loadModuleCSS("app:field","field.css")