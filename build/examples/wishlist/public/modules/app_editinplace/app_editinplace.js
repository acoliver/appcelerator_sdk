Appcelerator.Module.EditinPlace={getName:function(){return"appcelerator editinplace"},getDescription:function(){return"tabpanel editinplace"},setPath:function(A){this.modulePath=A},getVersion:function(){return 1},getSpecVersion:function(){return 1},getAuthor:function(){return"Jeff Haynie"},getModuleURL:function(){return"http://www.appcelerator.org"},isWidget:function(){return true},getWidgetName:function(){return"app:editinplace"},execute:function(D,A,C,B){},compileWidget:function(F){var A=F["id"];var I=$(A);var O=$(A+"_editinplace_input");var J=$(A+"_editinplace_text");var H=$(A+"_editinplace_buttons");var K=$(A+"_editinplace_savebutton");var C=$(A+"_editinplace_cancelbutton");var M=$(A+"_error");I.value=J.innerHTML;I.field=O;var L=function(R){R=Event.getEvent(R);var Q=false;if(Event.isEnterKey(R)){K.click()}else{if(Event.isEscapeKey(R)){C.click()}}if(Q){Event.stop(R)}return !Q};var E=function(Q){J.style.display="none";O.style.display="";H.style.display="";O.focus();O.select();Appcelerator.Compiler.executeFunction(O,"revalidate")};var D=function(Q){J.style.display="";O.style.display="none";J.innerHTML=O.value;I.value=O.value;H.style.display="none"};var G=function(Q){J.style.display="";O.style.display="none";H.style.display="none";O.value=J.innerHTML;if(M.style.visibility!="hidden"){M.style.visibility="hidden"}if(M.style.display!="none"){M.style.display="none"}};Event.observe(O,"keypress",L,false);Event.observe(J,"click",E,false);Event.observe(K,"click",D,false);Event.observe(C,"click",G,false);Appcelerator.Compiler.addTrash(I,function(){Event.stopObserving(O,"keypress",L);Event.stopObserving(J,"click",E);Event.stopObserving(K,"click",D);Event.stopObserving(C,"click",G)});var P=F["message"];if(P){P=Appcelerator.Compiler.convertMessageType(P);var N=F["property"];var B={accept:function(){return[P]},acceptScope:function(Q){return I.scope=="*"||I.scope==Q},onMessage:function(Q,T,R,V){try{$D("received message = "+V+":"+Q+",data="+Object.toJSON(T));var S=N?Object.getNestedProperty(T,N):T;switch(F["type"]){case"text":J.innerHTML=S;O.value=S;break}if(O.revalidate){O.revalidate()}}catch(U){Appcelerator.Compiler.handleElementException(I,U)}}};Appcelerator.Util.ServiceBroker.addListener(B)}},getAttributes:function(){return[{name:"type",optional:true,defaultValue:"text"},{name:"defaultClassName",optional:true,defaultValue:""},{name:"editClassName",optional:true,defaultValue:""},{name:"buttonClassName",optional:true,defaultValue:""},{name:"saveOn",optional:true},{name:"cancelOn",optional:true},{name:"validator",optional:true,defaultValue:"required"},{name:"position",optional:true,defaultValue:"right"},{name:"errorPosition",optional:true,defaultValue:"top"},{name:"defaultValue",optional:true,defaultValue:""},{name:"errorMessage",optional:true,defaultValue:"Required"},{name:"message",optional:true},{name:"property",optional:true}]},buildWidget:function(C,I){var F=I["type"];var S=I["defaultClassName"];var W=I["editClassName"];var J=I["buttonClassName"];var U=I["saveOn"];var M=I["cancelOn"];var H=I["validator"];var V=I["position"];var L=I["errorPosition"];var P=I["defaultValue"];var E=Appcelerator.Module.EditinPlace.modulePath+"images/bullet_error.png";var B=I["errorMessage"];var Q='<img src="'+E+'"/>'+B;var G="error_color small_text";var N=C.id;var K="";for(var T=0,R=C.childNodes.length;T<R;T++){var O=C.childNodes[T];if(O.nodeType==1){var A=O.getAttribute("langid");switch(O.nodeName){case"ERROR":G=O.getAttribute("class")||G;Q=(A)?Appcelerator.Localization.get(A,Q):Appcelerator.Compiler.getHtml(O);break}}}var D=N+"_error";if(L=="top"){K+='<div class="'+G+'" id="'+D+'" style="display:none">'+Q+"</div>"}K+="<div>";switch(F){case"text":editinplace_html='<input class="'+W+'" style="display:none" id="'+N+'_editinplace_input" '+(H?'validator="'+H+'"':"")+' decorator="custom" decoratorId="'+D+'" type="text" value="'+P+'"/>';editinplace_html+='<div style="cursor:pointer" class="'+S+'" id="'+N+'_editinplace_text">'+P+"</div>";break;case"textarea":editinplace_html='<textarea class="'+W+'" style="display:none" id="'+N+'_editinplace_input" '+(H?'validator="'+H+'"':"")+' decorator="custom" decoratorId="'+D+'">'+P+"</textarea>";editinplace_html+='<div style="cursor:pointer" class="'+S+'" id="'+N+'_editinplace_text">'+P+"</div>";break;default:throw"unsupported field type: '"+F+"'"}button_html='<div id="'+N+'_editinplace_buttons" style="display:none;">';button_html+='<input activators="'+N+'_editinplace_input" class="'+J+'" id="'+N+'_editinplace_savebutton" on="'+U+'" type="button" value="Save">';button_html+='<input class="'+J+'" id="'+N+'_editinplace_cancelbutton" on="'+M+'" type="button" value="Cancel">';button_html+="</div>";switch(V){case"right":K+="<table><tr><td>"+editinplace_html+"</td><td>"+button_html+"</td></tr></table>";break;case"left":K+="<table><tr><td>"+button_html+"</td><td>"+editinplace_html+"</td></tr></table>";break;case"bottom":K+="<table><tr><td>"+editinplace_html+"</td></tr><tr><td>"+button_html+"</td></tr></table>";break;case"top":K+="<table><tr><td>"+button_html+"</td></tr><tr><td>"+editinplace_html+"</td></tr></table>";break}K+="</div>";if(L=="bottom"){K+='<div class="'+G+'" id="'+D+'" style="display:none">'+Q+"</div>"}I["id"]=C.id;return{"presentation":K,"position":Appcelerator.Compiler.POSITION_REPLACE,"compile":true,"wire":true}}};Appcelerator.Core.registerModule("app:editinplace",Appcelerator.Module.EditinPlace);Appcelerator.Core.loadModuleCSS("app:editinplace","editinplace.css")