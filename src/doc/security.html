<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org/appcelerator">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>

<link rel="stylesheet" type="text/css" href="css/appcelerator.css" />
<link rel="stylesheet" type="text/css" href="css/SyntaxHighlighter.css" />
<link rel="stylesheet" type="text/css" href="css/doc_content.css" />

<script type="text/javascript" src="js/seamless2.js"></script>
<script type="text/javascript" src="js/sh/shCore.js"></script>
<script type="text/javascript" src="js/sh/shBrushJScript.js"></script>
<script type="text/javascript" src="js/sh/shBrushXml.js"></script>
<script type="text/javascript" src="js/sh/shBrushCss.js"></script>
<script type="text/javascript" src="js/sh/shBrushRuby.js"></script>
<script type="text/javascript" src="js/sh/shBrushJava.js"></script>
<script type="text/javascript" src="js/sh/shBrushPhp.js"></script>



</head>
<body>
	<h2>Security</h2>

	<!-- NAVIGATION -->
	<p>
	<a class="active" on="click then l:security[show=example] and add[class=active] or l:content[show!=example] then remove[class=active]">Example</a> |
	<a  on="click then l:security[show=code] and add[class=active] or l:content[show!=code] then remove[class=active]">Code</a> <!--|
	<a  on="click then l:security[show=usage] and add[class=active] or l:content[show!=usage] then remove[class=active]">Usage</a> -->
	</p>
	<p>To add security to your application, simply 
		<ul>
			<li>define an attribute named "security" on the element for which you would like the action to be authorized.  This attribute a a comma delimited list of roles.
			<li>implement a the function Appcelerator.SecurityProvider.doPrivileged
		</ul>
		<br/>
	</p>
	<script>
	Appcelerator.SecurityProvider.doPrivileged = function(element,roles)
	{
		if (roles == 'admin')
		{
			return false;
		}
		else
		{
			return true;
		}
	};
	</script>
	<!-- EXAMPLE -->
	<div on="l:security[show=example] then show else hide">
		<!--
		<div security="admin">
			<a on="click then l:security.example.request">try admin</a>
		</div>
		-->
		<div id="security_user_div" security="user">
			<a on="click then l:security.example.request">try user</a>
		</div>
		<app:script on="l:security.example.request then execute">
			alert('anyone success');
		</app:script>
	</div>

	<!-- CODE -->
	<div on="l:security[show=code] then show else hide" style="display:none">
		<p>Here's the code:
			<textarea name="code" class="xml:nocontrols">
				<div security="user">
					<a on="click then l:security.example.request">try user</a>
				</div>
				<app:script on="l:security.example.request then execute">
					alert('anyone success');
				</app:script>
				<app:script security="admin" on="l:security.example.request then execute">
					alert('admin success');
				</app:script>
			</textarea>	
		</p>
		<p>here's the script for the handler
			<textarea name="code" class="xml:nocontrols">
				<script>
				Appcelerator.SecurityProvider.doPrivileged = function(element,roles)
				{
					if (roles == 'admin')
						return false;
					else
						return true;
				};
				</script>
			</textarea>	
		</p>
	</div>

	<!-- USAGE -->
	<div on="l:security[show=usage] then show else hide" style="display:none">
		<p>
			 Appcelerator.SecurityProvider.doPrivileged:
				<table cellspacing="5px">
					<tr>
					  <td class="term">element</td>
					  <td class="def">the element that is being invoked</td>
					</tr>
					<tr>
					  <td class="term">roles</td>
					  <td class="def">array of roles that are authorized</td>
					</tr>
				</table>
		</p>
<!--		<p>
			 Optional Options:
				<table cellspacing="5px">
					<tr>
					  <td class="term"></td>
					  <td class="def"></td>
					</tr>
				</table>
		</p>
-->
	</div>	
	
	<script>
		dp.SyntaxHighlighter.ClipboardSwf = 'js/sh/clipboard.swf';

		dp.SyntaxHighlighter.HighlightAll('code');
	</script>

</body>

</html>