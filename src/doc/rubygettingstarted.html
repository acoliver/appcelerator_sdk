<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>

<link rel="stylesheet" type="text/css" href="css/SyntaxHighlighter.css" />
<link rel="stylesheet" type="text/css" href="css/doc_content.css" />

<script type="text/javascript" src="js/sh/shCore.js"></script>
<script type="text/javascript" src="js/sh/shBrushJScript.js"></script>
<script type="text/javascript" src="js/sh/shBrushXml.js"></script>
<script type="text/javascript" src="js/sh/shBrushCss.js"></script>
<script type="text/javascript" src="js/sh/shBrushRuby.js"></script>
<script type="text/javascript" src="js/sh/shBrushJava.js"></script>
<script type="text/javascript" src="js/sh/shBrushPhp.js"></script>



</head>
<body>
	<h2>Ruby</h2>
	<p>
	<a class="active" on="click then l:rubygettingstarted[show=install] and add[class=active] or l:rubygettingstarted[show!=install] then remove[class=active]">Installation</a> |
	<a  on="click then l:rubygettingstarted[show=client] and add[class=active] or l:rubygettingstarted[show!=client] then remove[class=active]">Web Client</a> |
	<a  on="click then l:rubygettingstarted[show=service] and add[class=active] or l:rubygettingstarted[show!=service] then remove[class=active]">Ruby Service</a> 
	</p>


	<div on="l:rubygettingstarted[show=install] then show else hide">
		<h3>Pre-requisites</h3>
		<p>
		It is assumed that you already have the following installed:
		<ul>
			<li><a href="http://www.ruby-lang.org">Ruby</a> 1.8.6 or higher</li>
			<li><a href="http://www.rubygems.org/">Ruby Gems</a> 0.9.4 or higher</li>
		</ul>
		</p>

		<h3>Get the Distribution</h3>
		<p>
		Download the java sdk distribution from <a href="http://www.appcelerator.org">http://www.appcelerator.org</a>
		<ul>
			<li>appcelerator-2.0.0.gem - this is the distribution for creating your ruby services (which are deployed as appcelerator services and applications)
		</ul>
		<h3>Create the Appcelerator Ruby Service</h3>
		<p>
			First lets install the gem
			<pre class="command">gem install -l appcelerator-2.0.0.gem</pre>
			Now create your project workspace
			<pre class="command">appcelerator myapp</pre>
			now you can start the service
			<pre class="command">cd myapp
script/server</pre>
			You can take a look at the starting page at <a href="http://localhost:3000">http://localhost:3000</a>
		</p>
	
		<h3>Testing</h3>
		You should now be able to hit the test service.  Goto <a href="http://localhost:3000/servicetester.html">http://localhost:3000/servicetester.html</a> and put the following in
		<ul>
			<li><b>message type</b>: remote:app.test.message.request
		</ul>
		you should get the following back
		<ul>
			<li><b>message type</b>: remote:app.test.message.response
			<li><b>data.message</b>: "I received from you: Hello,world"
			<li><b>data.success</b>: "true"
		</ul>
	</div>
	<div on="l:rubygettingstarted[show=client] then show else hide" style="display:none">
		<p>
			<h3>Web Implementation</h3>
			Once you have created the java project, your web source will exist in:
			<ul>
				<li><b>public</b>: directory where all your html exists
				<li><b>public/appcelerator.xml</b>: defines the location and behaviour of the service broker
			</ul>

			<h3>public/appcelerator.xml</h3>
			You should not have to make any changes to this file
			<textarea name="code" class="xml:nocontrols">
@ruby_appcelerator.xml@
			</textarea>

			<h3>public/index.html</h3>
			In the example below, you could modify the existing index.html to send a sample request to the server and display it in a div.
			<textarea name="code" class="xml:nocontrols">
@index.html@
			</textarea>
			<h3>Next Steps</h3>
			You are now ready to proceed to creating your Ruby Service
		</p>
	</div>
	<div on="l:rubygettingstarted[show=service] then show else hide" style="display:none">
		<p>
			<h3>Ruby Service</h3>
			To add a new service, simply properly define methods in a class as the individual handlers.  The key things for this are that
			<ul>
				<li>the file ends with <tt>_service.rb</tt>
				<li>the class ends with <tt>Service</tt> and extends <tt>Appcelerator::Service</tt>
				<li>you put the proper method signature <tt>method_name(message,request)</tt>
				<li>you make the appropriate call to <tt>handles_message</tt>
			</ul>
			<h3>app/services/contact_manager_service.rb</h3>
			You could create a new class ContactManagerService with the following source
			<textarea name="code" class="xml:nocontrols">
@contact_manager_service.rb@
			</textarea>
			
			<h3>Next Steps</h3>
			You may want to kill and restart rails
			<pre class="command">script/server</pre>
		</p>
	</div>
	<script>
		dp.SyntaxHighlighter.ClipboardSwf = 'js/sh/clipboard.swf';

		dp.SyntaxHighlighter.HighlightAll('code');
	</script>
</body>

</html>