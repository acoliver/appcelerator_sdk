<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>
	<script type="text/javascript" src="../js/appcelerator.js"></script>
	<script type="text/javascript" src="../locale/en.js"></script>
	
	<link rel="stylesheet" type="text/css" href="../css/test.css" />
</head>
<body>

<h3> Idle Manager Tests </h3> 
<p>
	These tests exercise the idle manager
</p>

<table width="90%">
	<tr>
		<td class="test" valign="middle">
		 	to keep from going to an idle state mousemove or keypress (you will be alerted when idle)
		</td>
		<td class="result">
            <input type="text" fieldset="idlemanagertest" id="timeout" value="30000"/>
			<input type="button" on="click then l:idlemanager.start" value="start" fieldset="idlemanagertest"></input>
			<app:script on="l:idlemanager.start then execute">
				Appcelerator.Util.IdleManager.stopTimer();
				Appcelerator.Util.IdleManager.started = false;
				Appcelerator.Util.IdleManager.idleListeners=new Array();
				Appcelerator.Util.IdleManager.IDLE_TIME=this.data.timeout;
				alert('starting');
				Appcelerator.Util.IdleManager.registerIdleListener(IdleManagerTest.work);
			</app:script>
			<!--
			<input type="button" on="click then l:idlemanager.cleanup" value="cleanup"></input>
			<app:script on="l:idlemanager.cleanup then execute">
				Appcelerator.Util.IdleManager.idleListeners=[];
			</app:script>
			-->
		</td>
	</tr>	
	<script>
		var IdleManagerTest = Class.create();
		IdleManagerTest.work = function()
		{
			Appcelerator.Util.IdleManager.idleListeners=new Array();
			Appcelerator.Util.IdleManager.stopTimer();
			alert('you timed out');
		};
	</script>
</table>
</body>

</html>