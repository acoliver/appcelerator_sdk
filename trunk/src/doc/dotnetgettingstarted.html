<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>

<link rel="stylesheet" type="text/css" href="css/SyntaxHighlighter.css" />
<link rel="stylesheet" type="text/css" href="css/doc_content.css" />

<script type="text/javascript" src="js/doc.js"></script>
<script type="text/javascript" src="js/sh/shCore.js"></script>
<script type="text/javascript" src="js/sh/shBrushJScript.js"></script>
<script type="text/javascript" src="js/sh/shBrushXml.js"></script>
<script type="text/javascript" src="js/sh/shBrushCss.js"></script>
<script type="text/javascript" src="js/sh/shBrushCSharp.js"></script>
<script type="text/javascript" src="js/sh/shBrushRuby.js"></script>
<script type="text/javascript" src="js/sh/shBrushJava.js"></script>
<script type="text/javascript" src="js/sh/shBrushPhp.js"></script>



</head>
<body style="visibility:hidden" on="l:app.compiled then visible">
	<h2>.Net</h2>
	<p>
	<a class="active" on="click then l:dotnetgettingstarted[show=install] and add[class=active] or l:dotnetgettingstarted[show!=install] then remove[class=active]">Installation</a> |
	<a  on="click then l:dotnetgettingstarted[show=client] and add[class=active] or l:dotnetgettingstarted[show!=client] then remove[class=active]">Web Client</a> |
	<a  on="click then l:dotnetgettingstarted[show=service] and add[class=active] or l:dotnetgettingstarted[show!=service] then remove[class=active]">C# .Net Service</a> 
	</p>

	<div on="l:dotnetgettingstarted[show=install] then effect[Appear] else effect[Fade]">

		<h3>Prerequisites</h3>
		<p>
		It is assumed that you already have the following installed:
		<ul>
			<li>IIS 5 or newer (installed and running)
			<li>.Net framework 2.0
			<li>Visual Studio 2005 or newer for development
		</ul>
		</p>

		<h3>Reference</h3>
		<p>
		In the documentation below, the following symbols will be used in lieu of concrete examples
		<ul>
			<li><tt>%IIS_APPROOT%</tt>: ex: C:\Inetpub\wwwroot
			<li><tt>%ISAPI_DLL%</tt>: ex: C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Aspnet_isapi.dll
			<li><tt>%PROJECT%</tt>: your project name ex: sb
		</ul>
		Heres the sample
		<pre class="command">set IIS_APPROOT=C:\Inetpub\wwwroot
set ISAPI_DLL="C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Aspnet_isapi.dll"
set PROJECT=sb</pre>
		</p>


		<h3>Configuring IIS</h3>
		See the "Deploy the Handler" section at <a href="http://support.microsoft.com/?id=308001" target="_blank">http://support.microsoft.com/?id=308001</a> for more information
		<ul>
			<li>Create a subfolder in your wwwroot folder. We will assume the default location of <tt>%IIS_APPROOT%</tt>.  Our application is called <tt>%PROJECT%</tt>
		   so we create a folder called <tt>%PROJECT%</tt> in the wwwroot folder
			<li>Now, open up the IIS management console (on Windows XP w/ IIS5.1, right click My Computer, choose Manage, Expand Services and Applications, 
		   Expand Internet Information Services, Expand Websites, Expand Default Web Site)
			<li>Right Click on your application name (<tt>%PROJECT%</tt> in this case) and click on properties
			<li>Click the Create button on the Properties window
			<li>Click the Configuration button on the Properties window
			<li>Click the Add button on the Application Configuration window
			<li>Click the Browse button on the Add/Edit Extension Mapping window
			<li>Select the aspnet_isapi.dll file (location varies - in our case it was <tt>%ISAPI_DLL%</tt>)
			<li>Type ".app" in the Extension text box
			<li>Make sure "Script engine" and "Check that file exists" are both checked
			<li>Click Ok three times to close all of the windows and get back to the IIS management console 
		</ul>
		
		<h3>Extract the distribution</h3>
		Download the dot net sdk distribution from <a href="http://www.appcelerator.org" target="_blank">http://www.appcelerator.org</a>
		<ul>
			<li>appcelerator_sdk_dotnet_@VERSION@.zip - this is the distribution for creating your .Net services
		</ul>

		<h3>Create project</h3>
		Now that you've extracted the template visual studio project lets create/import the project.  Note that the default provides you with a sample service implemented in 
		C#.  Open the visual studio project <tt>Appcelerator.sln</tt>.  If you have problems with this, you can perform the following to manually create your solution
		<ul>
			<li>Create a new "Class Library" project, using Visual Studio 
			<li>Right-Click your project name in the Solution Explorer and choose "Add reference..."
			<li>Click on the Browse tab
			<li>Navigate to and select the <tt>Appcelerator.dll</tt> file 
			<li>Add the <tt>TestService.cs</tt> to your project
		</ul>
		
		<h3>Build and deploy</h3>
		Now that you have succesfully setup your project, you can build.  Once you have build your DLL, copy the DLL your application's deploy directory:
		<pre class="command">mkdir %IIS_APPROOT%\%PROJECT%\bin\deploy
cd bin\Release
copy TestService.dll %IIS_APPROOT%\%PROJECT%\bin\deploy /Y
copy Appcelerator.dll %IIS_APPROOT%\%PROJECT%\bin /Y
cd ..\..
xcopy *-config.xml %IIS_APPROOT%\%PROJECT%\bin /Y</pre>
		Now lets copy the html files on over
		<pre class="command">cd src\web
xcopy * %IIS_APPROOT%\%PROJECT% /S</pre>
		</ul>

		<h3>Troubleshooting</h3>
		Getting a 404? Try the following in this order..
		<ul>
			<li>Reinstall .net framework 2.0
		</ul>
		Not getting a response from your service? Try the following..
		<ul>
			<li>Make sure your service is in your application's root\bin\deploy directory (e.g. <tt>%IIS_APPROOT%\%PROJECT%\bin\deploy</tt>)
		</ul>
	
		<h3>Testing</h3>
		You should now be able to hit the test service.  Goto <a href="http://localhost/%PROJECT%/servicetester.html" target="_blank">http://localhost/%PROJECT%/servicetester.html</a> and put the following in
		<ul>
			<li><b>message type</b>: remote:app.test.message.request.response
		</ul>
		you should get the following back
		<ul>
			<li><b>message type</b>: remote:app.test.message.response
			<li><b>data.message</b>: "I received from you: Hello,world"
			<li><b>data.success</b>: "true"
		</ul>

		<h3>Next Steps</h3>
		You are now ready to proceed to creating your <a on="click then l:dotnetgettingstarted[show=client]">Web Client</a>
	</div>
	<div on="l:dotnetgettingstarted[show=service] then effect[Appear] else effect[Fade]" style="display:none">
		<h3>C# .Net Service</h3>
		To add a new service, simply properly define methods in a class as the individual handlers.  The key things for this are that
		<ul>
			<li>the file ends with <tt>Service.cs</tt>
			<li>the class ends with <tt>Service</tt>
			<li>you put the proper method signature <tt>method_name(Message request, ref Message response)</tt>
			<li>you put the proper anootations directly above the method <tt>[Service("xxx", "xxx")] </tt>
		</ul>

		<h3>ContactManagerService.cs</h3>
		You can check out the existing ContactManagerService.cs with the following source
		<textarea name="code" class="csharp:nocontrols">
@ContactManagerService.cs@
		</textarea>
		
		<h3>Next Steps</h3>
		Build your DLL and deploy it to IIS

	</div>
	<div on="l:dotnetgettingstarted[show=client] then effect[Appear] else effect[Fade]" style="display:none">
		<p>
			<h3>Web Implementation</h3>
			Once you have created the java project, your web source will exist in:
			<ul>
				<li><b>src/web</b>: directory where all your html exists
				<li><b>src/web/appcelerator.xml</b>: defines the location and behaviour of the service broker
			</ul>

			<h3>src/web/appcelerator.xml</h3>
			You should not have to make any changes to this file
			<textarea name="code" class="xml:nocontrols">
@appcelerator-dotnet.xml@
			</textarea>

			<h3>src/web/index.html</h3>
			In the example below, you could modify the existing index.html to send a sample request to the server and display it in a div. 
			<textarea name="code" class="xml:nocontrols">
@index.html@
			</textarea>

			<h3>Next Steps</h3>
			You are now ready to proceed to creating your <a on="click then l:dotnetgettingstarted[show=service]">.Net C# Service</a>
		</p>
	</div>
	<script>
		dp.SyntaxHighlighter.ClipboardSwf = 'js/sh/clipboard.swf';

		dp.SyntaxHighlighter.HighlightAll('code');
	</script>
</body>

</html>