<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="js/appcelerator.js"></script>

<link rel="stylesheet" type="text/css" href="css/SyntaxHighlighter.css" />
<link rel="stylesheet" type="text/css" href="css/doc_content.css" />

<script type="text/javascript" src="js/doc.js"></script>
<script type="text/javascript" src="js/sh/shCore.js"></script>
<script type="text/javascript" src="js/sh/shBrushJScript.js"></script>
<script type="text/javascript" src="js/sh/shBrushXml.js"></script>
<script type="text/javascript" src="js/sh/shBrushCss.js"></script>
<script type="text/javascript" src="js/sh/shBrushRuby.js"></script>
<script type="text/javascript" src="js/sh/shBrushJava.js"></script>
<script type="text/javascript" src="js/sh/shBrushPhp.js"></script>



</head>
<body style="visibility:hidden" on="l:app.compiled then visible">
	<h2>Message</h2>

	<!-- NAVIGATION -->
	<p>
	<a class="active" on="click then l:message[show=example] and add[class=active] or l:message[show!=example] then remove[class=active]">Example</a> |
	<a  on="click then l:message[show=code] and add[class=active] or l:message[show!=code] then remove[class=active]">Code</a> |
	<a  on="click then l:message[show=usage] and add[class=active] or l:message[show!=usage] then remove[class=active]">Usage</a> 
	</p>

	<!-- EXAMPLE -->
	<div on="l:message[show=example] then show else hide">
		<p>
			The Message Widget allows you to send a message when the page is loaded or when a
			defined expression condition is met (i.e., <tt>on="[condition] then execute"</tt>).
			Message Widgets are good for triggering messages that request the initial data
			for a page, but they can certainly be used for other purposes. 
			
		</p>
		<p>
			Here's an example:
		</p>
		<div style="border:1px solid #ccc;background-color:#f6f6f6;padding:10px;margin-top:10px;cursor:pointer">
			<span on="click then l:message.trigger
				or l:message.example then hide
				or l:reset.message.example then show">
				Click me to trigger your fortune
			</span>
			<span on="l:reset.message.example then hide or l:message.example then show" style="display:none">
				<span on="l:message.example then value[message] or l:reset.message.example then clear"></span>
				<span style="color:red" on="l:message.example then value[answer] after 1s
					or l:reset.message.example then clear"></span>
				<a on="click then l:reset.message.example">Reset Example</a>
			</span>
		</div>

		<app:message on="l:message.trigger then execute" 
			name="l:message.example" args="{'message':'You will enjoy financial success','answer':'haha. just kidding.'}">
		</app:message>
		
	</div>

	<!-- CODE -->
	<div on="l:message[show=code] then show else hide" style="display:none">

		<p>Here's the code:
			<textarea name="code" class="xml:nocontrols">
				<div style="border:1px solid #ccc;background-color:#f6f6f6;padding:10px;margin-top:10px;cursor:pointer">
					<span on="click then l:message.trigger
						or l:message.example then hide
						or l:reset.message.example then show">
						Click me to trigger your fortune
					</span>
					<span on="l:reset.message.example then hide or l:message.example then show" style="display:none">
						<span on="l:message.example then value[message] or l:reset.message.example then clear"></span>
						<span style="color:red" on="l:message.example then value[answer] after 1s
							or l:reset.message.example then clear"></span>
						<a on="click then l:reset.message.example">Reset Example</a>
					</span>
				</div>

				<app:message on="l:message.trigger then execute" 
					name="l:message.example" 
					args="{'message':'You will enjoy financial success','answer':'haha. just kidding.'}">
				</app:message>
			</textarea>	
		</p>
	</div>

	<!-- USAGE -->
	<div on="l:message[show=usage] then show else hide" style="display:none">
		<p>
			 Required Options:
				<table cellspacing="5px">
					<tr>
					  <td class="term">name</td>
					  <td class="def">The name of the message to publish</td>
					</tr>
				</table>
		</p>
		<p>
			 Optional Options:
				<table cellspacing="5px">
					<tr>
					  <td class="term">on</td>
					  <td class="def">If the Message Widget does not have a <tt>on</tt> expression
						defined. The message will be published when the page is loaded.  If the expression
						is defined the message will be published when the <tt>on</tt> condition is met.
						<p>Usage: <tt>on="[condition] then execute"</tt>.  </p>  
						<p>You can add an optional <tt>after</tt> that will execute the script
							when its condition is met after some defined amount of time - e.g.,
							<tt>on="l:my.message then execute after 2s"</tt>
						</p>

					</td>
					</tr>

					<tr>
					  <td class="term">args</td>
					  <td class="def">JSON-based message payload</td>
					</tr>
				</table>
		</p>
	</div>	
	
	<script>
		dp.SyntaxHighlighter.ClipboardSwf = 'js/sh/clipboard.swf';

		dp.SyntaxHighlighter.HighlightAll('code');
	</script>

</body>

</html>