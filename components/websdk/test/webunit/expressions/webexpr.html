<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:app="http://www.appcelerator.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script type="text/javascript" src="../javascripts/appcelerator.js"></script>
	<link rel="stylesheet" type="text/css" href="../css/test.css" />
</head>
<body>

<h3> Web Expressions </h3> 
<p>
	These tests exercise web expressions parameter matching.
</p>

<table width="90%">
	<tr>
		<td class="test">l:test[foo]</td>
		<td class="result" on="l:test[foo] then value['failed'] else value['passed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!foo]</td>
		<td class="result" on="l:test[!foo] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count>0]</td>
		<td class="result" on="l:test[count>0] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count>1]</td>
		<td class="result" on="l:test[count>1] then value['passed'] else value['failed']"></td>
	</tr>
	
	<tr>
		<td class="test">l:test[count<101]</td>
		<td class="result" on="l:test[count<101] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count&lt;=100]</td>
		<td class="result" on="l:test[count<=100] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count&gt;=100]</td>
		<td class="result" on="l:test[count>=100] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!count&gt;101]</td>
		<td class="result" on="l:test[!count>101] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!count&gt;=101]</td>
		<td class="result" on="l:test[!count>=101] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!count&lt;101]</td>
		<td class="result" on="l:test[!count<101] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!count&lt;=200]</td>
		<td class="result" on="l:test[!count<=200] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count!=200]</td>
		<td class="result" on="l:test[count!=200] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count=100]</td>
		<td class="result" on="l:test[count=100] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count=~100]</td>
		<td class="result" on="l:test[count=~100] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count=~1]</td>
		<td class="result" on="l:test[count=~1] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count=~^1]</td>
		<td class="result" on="l:test[count=~^1] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count=~0$]</td>
		<td class="result" on="l:test[count=~0$] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!count=~9$]</td>
		<td class="result" on="l:test[!count=~9$] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count]</td>
		<td class="result" on="l:test[count] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!foobar]</td>
		<td class="result" on="l:test[!foobar] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count,!foobar]</td>
		<td class="result" on="l:test[count,!foobar] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[expr(this.count > 1)]</td>
		<td class="result" on="l:test[expr(this.count > 1)] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[expr(this.count > 1),count=100]</td>
		<td class="result" on="l:test[expr(this.count > 1),count=100] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[expr(this.count > 1),count>99,expr(this.count==100)]</td>
		<td class="result" on="l:test[expr(this.count > 1),count>99,expr(this.count==100)] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count,expr(1+1>1)]</td>
		<td class="result" on="l:test[count,expr(1+1>1)] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[count=$foobar]</td>
		<td class="result" on="l:test[count=$foobar] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[$heyya]</td>
		<td class="result" on="l:test[$heyya] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">l:test[!$duh]</td>
		<td class="result" on="l:test[!$duh] then value['passed'] else value['failed']"></td>
	</tr>
	<tr>
		<td class="test">WEM: simple macro</td>
		<td class="result" on="#test1">failed</td>
	</tr>
	<tr>
		<td class="test">WEM: partial macro</td>
		<td class="result" on="#test2 then #test3">failed</td>
	</tr>
	<tr>
		<td class="test">WEM: substitution</td>
		<td class="result" on="#test4" id="wem1">failed</td>
	</tr>
	<tr>
		<td class="test">WEM: substitution #2</td>
		<td class="result" on="#test5[count=99,pass_fail=passed]">failed</td>
	</tr>
	<tr>
		<td class="test">compound conditions</td>
		<td class="result" on="(l:test6 or l:test6.1) then l:test6.result[msg='pass ']">
			<div>
				You should see pass twice below after you click this button:
				<button on="click then l:test6 and l:test6.1">Click me</button>
			</div>
			<div on="l:test6.result then value[msg,append=true]"></div>
		</td>
	</tr>
	<tr>
		<td class="test">WEM: compound conditions</td>
		<td class="result" on="#test7">
			<div>
				You should see pass twice below after you click this button:
				<button on="click then l:test7 and l:test7.1">Click me</button>
			</div>
			<div on="l:test7.result then value[msg,append=true]"></div>
		</td>
	</tr>
</table>

<input type="hidden" id="foobar" value="100"/>
<input type="hidden" id="heyya" value="true"/>
<input type="hidden" id="duh" value="true"/>
<app:message name="l:test" args="{count:'100','bar':null,'id':'wem1'}"></app:message>

<script>
 $WEM({
     'test1':"l:test then value['passed']",
     'test2':"l:test",
     'test3':"value['passed']",
	 'test4':"l:test[id=#{id}] then value['passed']",
	 'test5':"l:test[count>#{count}] then value['#{pass_fail}']",
	 'test7':"(l:test7 or l:test7.1) then l:test7.result[msg='pass ']"
 });
</script>

</body>
</html>